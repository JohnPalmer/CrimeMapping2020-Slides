<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Creating Vector Data From Raster Base | Crime Mapping and Spatial Analysis</title>
  <meta name="description" content="Companion guide for the Crime Mapping and Spatial Analysis labs." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Creating Vector Data From Raster Base | Crime Mapping and Spatial Analysis" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://johnpalmer.github.io/CrimeMapping2020-Slides/labs/" />
  <meta property="og:image" content="https://johnpalmer.github.io/CrimeMapping2020-Slides/labs/images/lab_manual_cover.png" />
  <meta property="og:description" content="Companion guide for the Crime Mapping and Spatial Analysis labs." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Creating Vector Data From Raster Base | Crime Mapping and Spatial Analysis" />
  
  <meta name="twitter:description" content="Companion guide for the Crime Mapping and Spatial Analysis labs." />
  <meta name="twitter:image" content="https://johnpalmer.github.io/CrimeMapping2020-Slides/labs/images/lab_manual_cover.png" />

<meta name="author" content="John Palmer" />


<meta name="date" content="2020-02-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="mapping-basics.html"/>
<link rel="next" href="vector-appearance.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Crime Mapping and Spatial Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Cover</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#accessing-qgis"><i class="fa fa-check"></i>Accessing QGIS</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#accessing-stata"><i class="fa fa-check"></i>Accessing Stata</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#accessing-r"><i class="fa fa-check"></i>Accessing R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lab-instructions.html"><a href="lab-instructions.html"><i class="fa fa-check"></i>Lab Instructions</a><ul>
<li class="chapter" data-level="" data-path="lab-instructions.html"><a href="lab-instructions.html#lab-1-9-january-2020"><i class="fa fa-check"></i>Lab 1: 9 January 2020</a></li>
<li class="chapter" data-level="" data-path="lab-instructions.html"><a href="lab-instructions.html#lab-2-23-january-2020"><i class="fa fa-check"></i>Lab 2: 23 January 2020</a></li>
<li class="chapter" data-level="" data-path="lab-instructions.html"><a href="lab-instructions.html#lab-3-5-february-2020"><i class="fa fa-check"></i>Lab 3: 5 February 2020</a></li>
<li class="chapter" data-level="" data-path="lab-instructions.html"><a href="lab-instructions.html#lab-4-20-february-2020"><i class="fa fa-check"></i>Lab 4: 20 February 2020</a></li>
</ul></li>
<li class="part"><span><b>I Crime Mapping</b></span></li>
<li class="chapter" data-level="1" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html"><i class="fa fa-check"></i><b>1</b> Getting Started with QGIS</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html#beginning-a-new-project"><i class="fa fa-check"></i><b>1.1</b> Beginning a new project</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html#changing-the-language"><i class="fa fa-check"></i><b>1.2</b> Changing the language</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html#installing-plugins"><i class="fa fa-check"></i><b>1.3</b> Installing plugins</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html#osm-tiles"><i class="fa fa-check"></i><b>1.4</b> Adding OpenStreetMap tiles</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html#placing-points-on-the-map"><i class="fa fa-check"></i><b>1.5</b> Placing points on the map</a></li>
<li class="chapter" data-level="1.6" data-path="getting-started-with-qgis.html"><a href="getting-started-with-qgis.html#placing-polygons-on-the-map"><i class="fa fa-check"></i><b>1.6</b> Placing polygons on the map</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mapping-basics.html"><a href="mapping-basics.html"><i class="fa fa-check"></i><b>2</b> Mapping Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="mapping-basics.html"><a href="mapping-basics.html#mapping-crime-locations"><i class="fa fa-check"></i><b>2.1</b> Mapping crime locations</a><ul>
<li class="chapter" data-level="2.1.1" data-path="mapping-basics.html"><a href="mapping-basics.html#downloading-data"><i class="fa fa-check"></i><b>2.1.1</b> Downloading Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="mapping-basics.html"><a href="mapping-basics.html#adding-data-to-your-map"><i class="fa fa-check"></i><b>2.1.2</b> Adding data to your map</a></li>
<li class="chapter" data-level="2.1.3" data-path="mapping-basics.html"><a href="mapping-basics.html#adding-data-using-an-api"><i class="fa fa-check"></i><b>2.1.3</b> Adding data using an API</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="mapping-basics.html"><a href="mapping-basics.html#working-with-multiple-layers"><i class="fa fa-check"></i><b>2.2</b> Working with Multiple Layers</a></li>
<li class="chapter" data-level="2.3" data-path="mapping-basics.html"><a href="mapping-basics.html#printing-or-exporting-a-map"><i class="fa fa-check"></i><b>2.3</b> Printing or Exporting a Map</a><ul>
<li class="chapter" data-level="2.3.1" data-path="mapping-basics.html"><a href="mapping-basics.html#setting-up-the-print-layout"><i class="fa fa-check"></i><b>2.3.1</b> Setting up the Print Layout</a></li>
<li class="chapter" data-level="2.3.2" data-path="mapping-basics.html"><a href="mapping-basics.html#adding-a-map"><i class="fa fa-check"></i><b>2.3.2</b> Adding a map</a></li>
<li class="chapter" data-level="2.3.3" data-path="mapping-basics.html"><a href="mapping-basics.html#adding-a-scale-bar"><i class="fa fa-check"></i><b>2.3.3</b> Adding a scale bar</a></li>
<li class="chapter" data-level="2.3.4" data-path="mapping-basics.html"><a href="mapping-basics.html#adding-a-legend"><i class="fa fa-check"></i><b>2.3.4</b> Adding a legend</a></li>
<li class="chapter" data-level="2.3.5" data-path="mapping-basics.html"><a href="mapping-basics.html#exporting-your-map"><i class="fa fa-check"></i><b>2.3.5</b> Exporting your map</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vector-from-raster.html"><a href="vector-from-raster.html"><i class="fa fa-check"></i><b>3</b> Creating Vector Data From Raster Base</a><ul>
<li class="chapter" data-level="3.1" data-path="vector-from-raster.html"><a href="vector-from-raster.html#obtaining-a-raster"><i class="fa fa-check"></i><b>3.1</b> Obtaining a raster</a></li>
<li class="chapter" data-level="3.2" data-path="vector-from-raster.html"><a href="vector-from-raster.html#creating-a-new-vector-layer."><i class="fa fa-check"></i><b>3.2</b> Creating a new vector layer.</a></li>
<li class="chapter" data-level="3.3" data-path="vector-from-raster.html"><a href="vector-from-raster.html#adding-features"><i class="fa fa-check"></i><b>3.3</b> Adding features</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vector-appearance.html"><a href="vector-appearance.html"><i class="fa fa-check"></i><b>4</b> Adjusting Vector Layer Appearance</a><ul>
<li class="chapter" data-level="4.1" data-path="vector-appearance.html"><a href="vector-appearance.html#opening-the-properties-window"><i class="fa fa-check"></i><b>4.1</b> Opening the properties window</a></li>
<li class="chapter" data-level="4.2" data-path="vector-appearance.html"><a href="vector-appearance.html#changing-fill-color-border-and-style"><i class="fa fa-check"></i><b>4.2</b> Changing fill color, border and style</a></li>
<li class="chapter" data-level="4.3" data-path="vector-appearance.html"><a href="vector-appearance.html#adding-labels"><i class="fa fa-check"></i><b>4.3</b> Adding labels</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="osm-vectors.html"><a href="osm-vectors.html"><i class="fa fa-check"></i><b>5</b> Adding OpenStreetMap vectors</a><ul>
<li class="chapter" data-level="5.1" data-path="osm-vectors.html"><a href="osm-vectors.html#downloading-osm-data"><i class="fa fa-check"></i><b>5.1</b> Downloading OSM data</a></li>
<li class="chapter" data-level="5.2" data-path="osm-vectors.html"><a href="osm-vectors.html#labeling-the-vector-data"><i class="fa fa-check"></i><b>5.2</b> Labeling the vector data</a></li>
<li class="chapter" data-level="5.3" data-path="osm-vectors.html"><a href="osm-vectors.html#filtering-the-vector-data"><i class="fa fa-check"></i><b>5.3</b> Filtering the vector data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="aggregated-data.html"><a href="aggregated-data.html"><i class="fa fa-check"></i><b>6</b> Mapping Aggregated Data</a><ul>
<li class="chapter" data-level="6.1" data-path="aggregated-data.html"><a href="aggregated-data.html#choropleth-maps"><i class="fa fa-check"></i><b>6.1</b> Choropleth Maps</a><ul>
<li class="chapter" data-level="6.1.1" data-path="aggregated-data.html"><a href="aggregated-data.html#downloading-data-1"><i class="fa fa-check"></i><b>6.1.1</b> Downloading data</a></li>
<li class="chapter" data-level="6.1.2" data-path="aggregated-data.html"><a href="aggregated-data.html#download-and-unzip-shapefiles"><i class="fa fa-check"></i><b>6.1.2</b> Download and Unzip Shapefiles</a></li>
<li class="chapter" data-level="6.1.3" data-path="aggregated-data.html"><a href="aggregated-data.html#add-country-boundaries-to-map"><i class="fa fa-check"></i><b>6.1.3</b> Add Country Boundaries to Map</a></li>
<li class="chapter" data-level="6.1.4" data-path="aggregated-data.html"><a href="aggregated-data.html#adding-the-data"><i class="fa fa-check"></i><b>6.1.4</b> Adding the data</a></li>
<li class="chapter" data-level="6.1.5" data-path="aggregated-data.html"><a href="aggregated-data.html#join-the-country-polygons-with-the-data."><i class="fa fa-check"></i><b>6.1.5</b> Join the country polygons with the data.</a></li>
<li class="chapter" data-level="6.1.6" data-path="aggregated-data.html"><a href="aggregated-data.html#color-the-polygons-according-to-crime-data"><i class="fa fa-check"></i><b>6.1.6</b> Color the polygons according to crime data</a></li>
<li class="chapter" data-level="6.1.7" data-path="aggregated-data.html"><a href="aggregated-data.html#clean-the-map"><i class="fa fa-check"></i><b>6.1.7</b> Clean the map</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="aggregated-data.html"><a href="aggregated-data.html#proportional-symbols"><i class="fa fa-check"></i><b>6.2</b> Proportional Symbols</a><ul>
<li class="chapter" data-level="6.2.1" data-path="aggregated-data.html"><a href="aggregated-data.html#style-the-point-symbols-using-graduated-sizes"><i class="fa fa-check"></i><b>6.2.1</b> Style the point symbols using graduated sizes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="aggregated-data.html"><a href="aggregated-data.html#pie-charts"><i class="fa fa-check"></i><b>6.3</b> Pie Charts</a></li>
</ul></li>
<li class="part"><span><b>II Spatial Analysis</b></span></li>
<li class="chapter" data-level="7" data-path="getting-started-with-qgis-1.html"><a href="getting-started-with-qgis-1.html"><i class="fa fa-check"></i><b>7</b> Getting Started with QGIS</a></li>
<li class="chapter" data-level="8" data-path="getting-started-with-stata.html"><a href="getting-started-with-stata.html"><i class="fa fa-check"></i><b>8</b> Getting Started with Stata</a><ul>
<li class="chapter" data-level="8.1" data-path="getting-started-with-stata.html"><a href="getting-started-with-stata.html#menus"><i class="fa fa-check"></i><b>8.1</b> Menus</a></li>
<li class="chapter" data-level="8.2" data-path="getting-started-with-stata.html"><a href="getting-started-with-stata.html#commands"><i class="fa fa-check"></i><b>8.2</b> Commands</a></li>
<li class="chapter" data-level="8.3" data-path="getting-started-with-stata.html"><a href="getting-started-with-stata.html#do-files"><i class="fa fa-check"></i><b>8.3</b> Do-Files</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="buffers-distances.html"><a href="buffers-distances.html"><i class="fa fa-check"></i><b>9</b> Buffers and Distances</a><ul>
<li class="chapter" data-level="9.1" data-path="buffers-distances.html"><a href="buffers-distances.html#getting-the-data"><i class="fa fa-check"></i><b>9.1</b> Getting the Data</a></li>
<li class="chapter" data-level="9.2" data-path="buffers-distances.html"><a href="buffers-distances.html#mapping-the-data"><i class="fa fa-check"></i><b>9.2</b> Mapping the Data</a></li>
<li class="chapter" data-level="9.3" data-path="buffers-distances.html"><a href="buffers-distances.html#drawing-buffers-around-the-schools"><i class="fa fa-check"></i><b>9.3</b> Drawing Buffers Around the Schools</a></li>
<li class="chapter" data-level="9.4" data-path="buffers-distances.html"><a href="buffers-distances.html#counting-points-in-polygons"><i class="fa fa-check"></i><b>9.4</b> Counting Points in Polygons</a></li>
<li class="chapter" data-level="9.5" data-path="buffers-distances.html"><a href="buffers-distances.html#calculating-distances"><i class="fa fa-check"></i><b>9.5</b> Calculating Distances</a></li>
<li class="chapter" data-level="9.6" data-path="buffers-distances.html"><a href="buffers-distances.html#joining-and-exporting-data"><i class="fa fa-check"></i><b>9.6</b> Joining and Exporting Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime Mapping and Spatial Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vector-from-raster" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Creating Vector Data From Raster Base</h1>
<p>It will often be necessary to create vector data – points, lines, or polygons – by tracing features on an existing raster map. This chapter will walk you through that process.</p>
<div id="obtaining-a-raster" class="section level2">
<h2><span class="header-section-number">3.1</span> Obtaining a raster</h2>
<p>We will start by finding and downloading a raster base For example, you could use a high resolution orthophoto, such as those available at <a href="http://www.icc.cat/appdownloads/index.html">http://www.icc.cat/appdownloads/index.html</a>. When you first enter this site, it will be set to download topographical maps. Change this setting to orthophoto by clicking on the “Ortoimatges” tab in the left sidebar. Also change the format option in the bottom of the left sidebar to “tif” (for GeoTiff), and select the highest resolution: 1:2.500. Now drag the green square in the mapping area to the region you want to download. For this exercize, zoom in and select UPF’s Jaume I building, reducing the size of the green box as you do this so that it just covers the building itself. (Note that with this resolution selecting a large area will result in a very large file.) Once you have the green box in place, click the <kbd>Descarregar</kbd> button and enter your email address. The platform will a link to the file to your email within a few moments and you can then click to download it.</p>
<p><img src="images/icc_map.png" alt="Downloading orthophoto from ICC website.)" />
## Adding raster to map</p>
<p>By saving the file in GeoTiff format you have ensured that it includes CRS information that QGIS can read automatically. Add the layer using <kbd>Layer → Add Layer → Add Raster Layer…</kbd> and then selecting the file you downloaded. Depending on the CRS of your current map, QGIS may then give you a choice of how to transform your raster’s CRS to the map’s CRS. You can select one of these or you can go back to your map and change it’s CRS to match the raster’s.</p>
<div class="figure">
<img src="images/adding_raster_layer.png" alt="Adding raster layer.)" />
<p class="caption">Adding raster layer.)</p>
</div>
</div>
<div id="creating-a-new-vector-layer." class="section level2">
<h2><span class="header-section-number">3.2</span> Creating a new vector layer.</h2>
<p>Create a new vector layer using <kbd>Layer → Create Layer → New Shapefile Layer…</kbd>. In the window that pops up, you can choose to make this a layer of points, lines, or polygons (see <kbd>Geometry Type</kbd> selector, third from top). You can also modify the character encoding (<kbd>File Encoding</kbd> selector), the CRS (selector just below the <kbd>File Encoding</kbd> selector), and the data fields that will be associated with this new layer.
For this exercise, choose <kbd>Polygon</kbd> as the type, and add at least one new field in which you will store information associated with each feature that you draw. For this exercise, we will be using the layer to indicate the approximate number of people who you observed in the courtyard during our first lab, so create a <kbd>Whole Number</kbd> field and give it a name (e.g. N). In the <kbd>File section</kbd> specify the file name and directory where you will save this new layer. Then click <kbd>OK</kbd>.</p>
</div>
<div id="adding-features" class="section level2">
<h2><span class="header-section-number">3.3</span> Adding features</h2>
<p>The new layer you have added should appear in the <kbd>Layers Panel</kbd>. Right click on this new layer and select <kbd>Toggle Editing</kbd>. You will now see a set of new buttons and available menu items. Select <kbd>Edit → Add Polygon Feature</kbd>. When you hover the mouse pointer over the map you will see that it now has the shape of a cross-hairs. Left click to add sequential points that define the polygon you want to add. When you have added the last point, right click the mouse and a dialog box will appear asking you to add the fields associated with this new feature. Remember that what you add will be limited by the field type you chose (and the ID field requires whole numbers by default). For this exercise, draw a rectangle over UPF’s Jaume I courtyard.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mapping-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vector-appearance.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["crime_mapping_lab.pdf", "crime_mapping_lab.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
