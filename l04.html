<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Crime Mapping and Spatial Analysis</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">

			<!-- In between the <div="reveal"> and the <div class="slides">-->
			<header style="position: absolute;top: 5px; left: 5px; right: 5px; text-align: center; z-index:500; font-size:50px; color:white; padding: 5px; font-family: 'League Gothic', Impact, sans-serif"></header>
			<footer style="position: absolute;bottom: 5px; left: 5px; text-align: center; z-index:500; font-size:12px;  padding: 5px; font-family: Arial, Helvetica, sans-serif"></footer>


			<div class="slides">

		<section>
		<h1>Crime Mapping and Spatial Analysis</h1>
		<h3>Lab 4: Introduction to Stata</h3>
		<p><a href="http://johnrbpalmer.com">John Palmer</a>
		</section>
		
			
<section>
<h3>Do-File Example</h3>

<pre><code>
// Spatial analysis of Chicago Crime data
// John Palmer - Spring 2019

version 15
clear
capture log close
log using chicago_analysis, text replace

// Here you would start your analysis for example:
display 2+2

log close
</code></pre>

</section>

<section>
<h4>Task 1</h4>
	<ul>
		<p>Follow the <a href="recipes.html#points_in_polys">Counting Points in Areal Units</a> recipe to aggregate the NYC assault data into police precincts. Save the resulting layer as an ESRI shape file.</p>
	</ul>
</section>


<section>
<h4>Task 2</h4>
	<ul>
		<p>Now go to the <a href="https://data.cityofchicago.org/Public-Safety/Crimes-Map/dfnk-7re6">Chicago Data Portal Crime Map</a> and filter the data to view just the last two weeks of crime reports. Download this data as a CSV file, import it into QGIS, and aggregate the points into an artificial grid of hexagons, which you can create using the MMQGIS plugin. Save the resulting layer as an ESRI shape file. Also save the original point layer as a CSV file.</p>
	</ul>
</section>


<section>
<h4>Task 3</h4>
	<ul>
		<p>Import the Chicago point layer CSV file into Stata and use the kmeans clustering command to cluster the reported crimes in space. Do this twice, using two different cluster numbers, then export your results as a CSV file.</p>
	</ul>
</section>


<section>
<h4>Task 4</h4>
	<ul>
		<p>Import the CSV file you generated in Task 3 into QGIS and display the points on the map, colored by one of the clusters. View both clusters and choose the one you think is most useful for understanding the spatial pattern of the points. Create a PDF of this map (using the print composer).</p>
	</ul>
</section>


<section>
	<h4>Lab Report (turn in via Aula Global before Thursday lecture)</h4>
		<ul>
		<li>Turn in the map you created in Task 4.</li>
		<li>Save the shapefile files from Tasks 1 and 2 for use in the next lab.</li>
		</ul>
	</ul>
</section>



			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
